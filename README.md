<h1>Scoreboard <a target="_blank" rel="noopener noreferrer nofollow" href="https://travis-ci.org/PetLahev/Scoreboard"><img as="img" src="https://travis-ci.org/PetLahev/Scoreboard.svg?branch=master" alt="Build Status" data-node-view-content="" style="white-space: pre-wrap; display: block;"></a></h1><p>Scoreboard c<a target="_blank" rel="noopener noreferrer nofollow" href="google.com">reated</a> with <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.amazon.com/FAVOLCANO-Waterproof-Feet%EF%BC%885M%EF%BC%89-Flexible-Lighting/dp/B012FFZP70/ref=sr_1_28_sspa?keywords=LED+Strips+red&amp;qid=1554275786&amp;s=gateway&amp;sr=8-28-spons&amp;psc=1">LED strips</a>, <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.amazon.com/Arduino-A000005-ARDUINO-Nano/dp/B0097AU5OU/ref=sr_1_15?keywords=Arduino+Nano&amp;qid=1554232867&amp;s=gateway&amp;sr=8-15"><s>Arduino Nano</s></a> <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.amazon.com/Arduino-A000066-ARDUINO-UNO-R3/dp/B008GRTSV6/ref=sr_1_3?keywords=arduino+UNO&amp;qid=1555441457&amp;s=gateway&amp;sr=8-3">Arduino Uno</a> and some manual work. Handy for voll<a target="_blank" rel="noopener noreferrer nofollow" href="https://www.google.com/">eyball, ta</a>ble tennis, badminton, football etc.</p><h3>Why Arduino UNO</h3><p>I wanted to use Nano and I designed the motherboard for using Nano but unfortunately it appeared to have one, not that serious problem for others, but <a target="_blank" rel="noopener noreferrer nofollow" href="https://stackoverflow.com/questions/55680065/arduino-nano-hm-10-module-not-receiving-data-on-mobile?noredirect=1#comment98070429_55680065">blocker for me</a>. I was basically not able to send messages back to the HM-10 bluetooth module which is the 'main feature' of this whole scoreboard. Thus after I built everything and was in the testing phase I found out that bluetooth communication is not working as I like. So instead of using the motherboard PCB I simply bought <a target="_blank" rel="noopener noreferrer nofollow" href="https://store.arduino.cc/holder-type-uno">UNO holder</a> and a <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.amazon.com/Aideepen-Assembled-Prototype-Expansion-Bareboard/dp/B01JFQQXRS/ref=sr_1_3?keywords=arduino+UNO+terminal&amp;qid=1555441354&amp;s=gateway&amp;sr=8-3">terminal for</a></p><ul class="no-list-item-spacing"><li><p>50 x 70 cm (19.7 x 27.55 inch) height x width</p></li><li><p>Each segment 10 cm (3.93 inch) length so 20 cm (7.9 inch) one number! (<em>for points</em>)</p></li><li><p>Each LED strip controlled by its own transistor</p></li><li><p>Controlled by bluetooth module (<a target="_blank" rel="noopener noreferrer nofollow" href="https://www.amazon.com/DSD-TECH-Bluetooth-iBeacon-Arduino/dp/B06WGZB2N4/ref=sr_1_1_sspa?keywords=HM-10-Bluetooth&amp;qid=1554232302&amp;s=gateway&amp;sr=8-1-spons&amp;psc=1">HM-10 Bluetooth 4.0 BLE</a>)</p><ul class="no-list-item-spacing"><li><p>Also possible to control via 433MHz module or an infra red (IR) controller</p></li></ul></li><li><p>You can use pre-defined setup for a game</p></li><li><p>You can setup your own game</p></li><li><p>Supports tiebreaks, sets and displaying players on service</p></li><li><p>Score can be updated by buttons (either wired or wireless)</p></li><li><p>As of April 2019 a free Androind application is used for controlling the scoreboard - <a target="_blank" rel="noopener noreferrer nofollow" href="https://play.google.com/store/apps/details?id=de.kai_morich.serial_bluetooth_terminal&amp;hl=en_US">Serial Bluetooth Terminal</a> v1.17</p><ul class="no-list-item-spacing"><li><p>Update Feb 2021 - It was proven that the most convinient way how to control the scoreboard is an IR controller (people tend to prefer this way over others)</p></li></ul></li><li><p>Eagle schematic and boards included</p></li><li><p>The scoreboard case designed on <a target="_blank" rel="noopener noreferrer nofollow" href="http://thinkercad.com">thinkercad.com</a></p><ul class="no-list-item-spacing"><li><p><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.tinkercad.com/things/gNmK0jQ22qv">The box</a></p></li><li><p><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.tinkercad.com/things/9Don7XhJEvx">The display board</a> - just for measuring purpose</p></li></ul></li></ul><h2>Setting the Serial Bluetooth Terminal</h2><p>Just one device can be connected to the module at time! Make sure you pair the bluetooth module with your smart phone, add it under the <code>Devices</code> tab and then go to the <code>Settings - Send</code> and set the <code>Newline</code> option to <strong>none</strong>. On the main menu tap on the connect symbol. You should get a text saying "Connected to unnamed". (<em>Make sure you bluetooth module is powered and the indication LED is blinking</em>)</p><h2>Settings</h2><p>By default, the scoreboard is set as a clock (sets segment are used for seconds). There is no specific setting for turning the clock off as this is always done by providing any setting. If you need to go back to the 'clock' mode, just turn the power off and then on. You can setup your own game either in code - <a target="_blank" rel="noopener noreferrer nofollow" href="/Arduino/Scoreboard/src/globals.cpp">globals.cpp</a> - or at runtime when sending the SETTING character via the Serial Bluetooth Terminal. The SETTING character is = <code>!</code> (<em>exclamation mark</em>). This behaves as a toggle switch so when send first time <code>!</code> the scoreboard will switch to 'setting mode' and will accept certain settings, when sending second time <code>!</code> it will end the 'setting mode' and will be ready for a game!</p><p>You can setup</p><ul class="no-list-item-spacing"><li><p>Number of sets (up to 9)</p></li><li><p>Sets support - enabled/disabled</p><ul class="no-list-item-spacing"><li><p>Number of points per a set (up to 99)</p></li></ul></li><li><p>Points difference to win a set</p></li><li><p>Tiebreak support - enabled/disabled</p><ul class="no-list-item-spacing"><li><p>Points in tiebreak</p></li><li><p>Points difference to win a tiebreak set</p></li><li><p>The tiebreak set</p><ul class="no-list-item-spacing"><li><p>Set a number that represents the set in the match considered as tiebreak set. <em>For example, in tennis you would set number <code>7</code> here</em></p></li></ul></li></ul></li><li><p>Display player on service (<em>pre-set 4 players</em>) - enabled/disabled</p></li></ul><h3>Application settings</h3><p>The code now (<em>April 2019</em>) understands certain <code>key=value</code> pairs. Listed below but always check <a target="_blank" rel="noopener noreferrer nofollow" href="/Arduino/Scoreboard/src/settingController.h">settingController</a> header file for the latest settings</p><ul class="no-list-item-spacing"><li><p>Enable displaying sets = <code>b</code></p></li><li><p>Sets per match = <code>s</code></p></li><li><p>Points per set = <code>e</code></p></li><li><p>Points difference to win a set = <code>d</code></p></li><li><p>Support tiebreak = <code>t</code></p></li><li><p>Set the tiebreak set = <code>q</code></p></li><li><p>Points in tiebreak = <code>f</code></p></li><li><p>Points difference to win a tiebreak = <code>w</code></p></li><li><p>Enable displaying a player on service = <code>r</code></p></li><li><p>Swap score = <code>$</code></p></li><li><p>Set player on service = <code>p</code> and then number 1 - 4</p></li><li><p>Reset the whole game = <code>@</code></p></li><li><p>Turn sets segments to minute timer = <code>u</code></p><ul class="no-list-item-spacing"><li><p>Will automatically enable displaying sets</p></li></ul></li></ul><p>Examples of key-value setting</p><pre style="position: relative;"><code as="code" class="language-c++" data-node-view-content="" style="white-space: pre;"><span class="hljs-attr">b</span>=<span class="hljs-string">true</span>
<span class="hljs-attr">WIll</span> <span class="hljs-string">enable sets (the LEDs will be powered)</span>

<span class="hljs-attr">s</span>=<span class="hljs-string">2</span>
<span class="hljs-attr">A</span> <span class="hljs-string">team/player needs to win 2 sets to win the match</span>

<span class="hljs-attr">e</span>=<span class="hljs-string">11</span>
<span class="hljs-attr">A</span> <span class="hljs-string">team/player needs to win 11 points to win a set</span>
<span class="hljs-attr">(The</span> <span class="hljs-string">points difference setting will be considered here)</span>

<span class="hljs-attr">d</span>=<span class="hljs-string">2</span>
<span class="hljs-attr">A</span> <span class="hljs-string">set will be considered as finished when the score between the teams/players</span>
<span class="hljs-attr">1,</span> <span class="hljs-string">reach the minimum points to win a set (e.g. 11)</span>
<span class="hljs-attr">AND</span>
<span class="hljs-attr">2,</span> <span class="hljs-string">the difference is equal to 2</span>
<span class="hljs-attr">examples</span>: <span class="hljs-string">11:9 or 13:11 or 12:10 or 21:19 etc.</span>

<span class="hljs-attr">t</span>=<span class="hljs-string">true</span>
<span class="hljs-attr">Tiebreak</span> <span class="hljs-string">is enabled</span>

<span class="hljs-attr">q</span>=<span class="hljs-string">2</span>
<span class="hljs-attr">The</span> <span class="hljs-string">tiebreak set is the second set to win. In other words this will be the third set</span>
<span class="hljs-attr">For</span> <span class="hljs-string">the above example the tiebreak settings will be considered when sets are 1:1</span>

<span class="hljs-attr">f</span>=<span class="hljs-string">9</span>
<span class="hljs-attr">A</span> <span class="hljs-string">team/player needs to win 9 points to win the tiebreak set</span>

<span class="hljs-attr">w</span>=<span class="hljs-string">2</span>
<span class="hljs-attr">The</span> <span class="hljs-string">tiebreak will be considered as finished when the score between the teams/players</span>
<span class="hljs-attr">1,</span> <span class="hljs-string">reach the minimum points to win the tiebreak set (e.g. 9)</span>
<span class="hljs-attr">AND</span>
<span class="hljs-attr">2,</span> <span class="hljs-string">the difference is equal to 2</span>
<span class="hljs-attr">examples</span>: <span class="hljs-string">9:7 or 10:8 or 11:9 etc.</span>

<span class="hljs-attr">r</span>=<span class="hljs-string">true</span>
<span class="hljs-attr">Will</span> <span class="hljs-string">enable displaying player on service (The LEDs will be powered)</span>
<span class="hljs-attr">Note</span>: <span class="hljs-string">There are always 4 players pre-set, not configurable as of April 2019)</span>

<span class="hljs-attr">u</span>=<span class="hljs-string">true</span>
<span class="hljs-attr">Will</span> <span class="hljs-string">turn the sets segments to display minute timer. So it will count from 0 to 9999 minutes</span></code><div class="open_grepper_editor" title="Edit &amp; Save To Grepper"></div></pre><h3>Example of game settings</h3><h4>A free match (like football)</h4><pre style="position: relative;"><code as="code" data-node-view-content="" style="white-space: pre;">b=false   ' disable sets
s=0       ' no sets per match  
e=99      ' set maximum of points
t=false   ' tiebreak disabled
r=false   ' disable displaying player on service</code><div class="open_grepper_editor" title="Edit &amp; Save To Grepper"></div></pre><h4>A beach volleyball match</h4><pre style="position: relative;"><code as="code" data-node-view-content="" style="white-space: pre;">b=true    ' enable sets
s=2       ' a team needs to win 2 sets to win a match
e=21      ' a team needs to win 21 points to win a set
d=2       ' the points difference between the two teams must be 2 to win a set
t=reuw    ' tiebreak enabled
q=2       ' the tiebreak set is the second one to win. So the sets score is 1:1
f=15      ' a team needs to win 15 points to win the tiebreak set
w=2       ' the points difference between the two teams must be 2 to win the tiebreak set
r=true    ' enable displaying a player who serves</code><div class="open_grepper_editor" title="Edit &amp; Save To Grepper"></div></pre><h2>How to use</h2><p>Once your game is set and you leave the settings mode (<em>by sending <code>!</code> flag</em>) your match can start. Based on the type of your match the scoreboard will control all the aspect of the match you will just increase or decrease number of points for the <strong>Home</strong> or <strong>Away</strong> team</p><p>Send<br><code>h</code> - to give a point to <strong>Home</strong> team<br><code>a</code> - to give a point to <strong>Away</strong> team</p><p>If you make a mistake (<em>we all do</em>) you can take a point back.<br>Send<br><code>v</code> - to decrease points of <strong>Home</strong> team<br><code>m</code> - to decrease score of <strong>Away</strong> team</p><p><strong>Please note:</strong> Taking point back may have an affect on number of sets played, match finished, player on service etc. The code as of April 2019 cares just about simple cases and supports returning all back just for <em>one</em> point so if you made a mistake and give a point in the middle of set to a wrong team, taking the point back will work but if you made the same mistake when the team you gave won a set/match then taking the point back will NOT have any affect. It's better to start a new match by resetting the match and setting the correct score by sending few <code>h</code> or <code>a</code>.</p><h2>How to build</h2><p>OK if you get here you actually may want to build your own scoreboard and I do understand that, it's much more fun!</p><p>If you just want to take the code and change it be aware that I didn't use the official Arduino IDE as I didn't find it as good as it should be. This project is made by <a target="_blank" rel="noopener noreferrer nofollow" href="https://code.visualstudio.com/">Visual Studio Code</a> and <a target="_blank" rel="noopener noreferrer nofollow" href="https://platformio.org/">Platform IO</a> extension both free. Once installed you should be able to build the project as it has all the settings done so you will get the right versions of used libraries and everything else. Please check <a target="_blank" rel="noopener noreferrer nofollow" href="/Arduino/platformio.ini">platformio.ini</a> file to see if I added your Arduino board to the environment configuration. As of April 2019 I have this configuration</p><pre style="position: relative;"><code as="code" data-node-view-content="" style="white-space: pre;">[platformio]
env_default = uno

[env:nanoatmega328]
platform = atmelavr
board = nanoatmega328
framework = arduino

[env:uno]
platform = atmelavr
framework = arduino
board = uno</code><div class="open_grepper_editor" title="Edit &amp; Save To Grepper"></div></pre><p>The <code>env_default = uno</code> specifies for which board Platform IO builds the code, in this case is Arduino Uno. Make sure you have the right one here otherwise the code won't work.<br>Let me also make you aware that I'm not C++ guy and I found it pretty hard to learn so the code is probably all messy but working.</p><p>If you also want to build the scoreboard case check the <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.tinkercad.com/things/gNmK0jQ22qv">Tinkercad page</a>. I tried to make it in 1:5 scale but again it was my first experience with 3D software. The <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.tinkercad.com/things/9Don7XhJEvx">shield</a> is there only for measurement purpose. I just wanted to see to what size all the LED strips will fit and how it will look like. Based on the size I designed the <a target="_blank" rel="noopener noreferrer nofollow" href="https://www.tinkercad.com/things/gNmK0jQ22qv">case</a>.<br>In terms of material use whatever will fit you. My original plan was using plastic because I didn't want to make it heavy but still not too fragile. For the first version I ended up with a 5mm wood board you can buy in hobby markets asked a joiner to cut the board into pieces and let him actually figure out how to put it all together, it cost me just ~$10 then you just need to a drill and couple screws and put it all together</p><p>To be continued</p>